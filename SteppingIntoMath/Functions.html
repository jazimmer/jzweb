<!DOCTYPE html><html><head><meta charset="utf-8"><title>Stepping Into Mathematics - Functions</title>
<style text/css>
body {
   font-family:"Times New Roman", Times, serif;
   font-size:100%;
   line-height:125%;
   max-width:800px;
}

div,h1,h2,h3,h4,h5,h6,ol,ul,img {
   position:relative;
   margin-top:0ex;
   margin-bottom;0ex;
}

h1 { 
   text-align:center;
}

h4{
   margin-bottom:0;
}

h1.extra {
   font-size:1.25em;
   margin-top:-1.8ex;
   margin-bottom:0ex;
}

h5.by {
   margin-top:1.6ex;
   margin-bottom:0ex;
   text-align:center;
   font-size:0.95em;
}

h2.first {
   margin-top:2.5ex;
   margin-bottom:2.6ex; 
}

h2.next {
   break-before:page;
   margin-top:4ex;
   margin-bottom:2ex; 
}

.spaced2 {
   margin-top:2ex;
   margin-bottom:0ex;
}

.spaced1,ul,ol {
   margin-top:1.3ex;
   margin-bottom:1.1ex;
}

.spaced0 {
  margin-top:-1.85ex;
  margin-bottom:0;
}

img{
   margin-left:2em;
   text-align:center
}


li {
   font-family:"Times New Roman", Times, serif;
   font-size:0.95em;
   margin-top:1.85ex;
   line-height:1.8ex;
}

.no-bullet {
   list-style-type:none;
   list-style-position:outside;
}

div.ln {
   margin-top:-1.3ex;
   margin-bottom:-1.3ex;
   padding:0;
}

.half_display {
   margin-top:2ex;
   margin-bottom:0ex;
}

.display {
}

.indent {
   padding-left:2em;
   padding-right:0.75em;
   margin-top:2ex;
   margin-bottom:2ex;
}

.code_block {
   white-space:pre;
   margin-top:-1ex;
   font-family: "Courier New", monospace;
   font-size:0.94em; 
}

.cmxFont {
   font-family:"Comic Sans MS", cursive, sans-serif;
   font-weight:500;
   font-size:0.95em;
}

.code {
   white-space:nowrap;
   font-family: "Courier New", monospace;
   font-size:0.94em; 
}


.smalljz {
   font-size:0.8em; 
}

.sub_sup_size {
   font-size:0.7em; 
}

.largejz {
   font-size:1.4em; 
}


.italicjz {
  font-family: serif;
  font-style:italic;
}

.boldjz {
  font-family: sans-serif;
  font-weight:bold;
}


</style>
</head><body>

<div> 

<div  class="center display"><img class="center" height="75px" src="http://www.jazimmer.net/SteppingIntoMath/images/Draft.png" alt="image: draft"/></div>

<h1 class="spaced1">Functions</h1>

Functions are ubiquitous in mathematics.  However the notation
for defining and applying them is not standard.  Herein the
notation has been optimized for the subject matter of this
topic.

<h2 class="first">Functions as Processes</h2>

I often think of a function as a process that takes some input
and produces some output.  When
we want output we <span class="italicjz">apply</span> the function to the relevant input.  Applying a
function lets  us
pretend the output is right there in front of us.
For example <span class="code">sq</span> could be a function that
converts a number into its square. If we wanted to work with
the square of 2 we would apply <span class="code">sq</span> this way  

<div  class="code_block indent display">
sq(2)
</div>

and expect what we have written to be interpreted two ways:
as the application of <span class="code">sq</span> on the input 2 and as the output
that arises from that application.  
When thinking of <span class="code">sq(2)</span> as the number 4, we can do
arithmetic calculations with it.  Here for example we see
<span class="code">sq(2)</span> manipulated in an algebraic equation.

<div  class="code_block indent display">
sq(2) = 4
sq(2) - 4 = 0
</div>

Here is a bit more complex example. Consider this definition of a <span class="code">payment</span>
function.

<div  class="center display"><img class="center" height="80px" src="http://www.jazimmer.net/SteppingIntoMath/images/paymentD.png" alt="image: Describing the payment function"/></div>

An application of <span class="code">payment</span> would look like this.

<div  class="center display"><img class="center" height="40px" src="http://www.jazimmer.net/SteppingIntoMath/images/paymentA.png" alt="image: Applying payment"/></div>

Here the input is a 3-tuple and the output
is a number giving the monthly payment for a $10,000 loan at
5% annual interest to be paid over 12 months. 

</div><div  class="undefined half_display">
This description of <span class="code">payment</span> avoids describing a process
that produces its output.  There is an algebraic process that
can produce the described output but our topic being recursive
functions, we will not go that route.  Instead in Chapter 5 we
will see a recursive process
that approximates the described output.

<div class="spaced1">&nbsp;</div>
The set of all inputs for a function is known as its <span class="italicjz">domain</span>.
The set of all possible outputs is known as its <span class="italicjz">range</span>.
Any particular output is known as a <span class="italicjz">return value</span>.  So 2
is in the domain of <span class="code">sq</span> and 4 is the return value for
<span class="code">sq(2)</span>.  The 3-tuple (10000,5,12) is in the domain of
<span class="code">payment</span> and 856.07 is the return value for
<span class="code">payment(10000,5,12)</span>.

</div><div  class="undefined half_display"> Many functions have a third set associated with them,
the <span class="italicjz">codomain</span>.  We can choose  any set
that includes a function's range to be its codomain.  In
some areas of mathematics (category theory comes to mind) if
we change the codomain of a
function we have created a different function.  But in this
monograph we largely ignore the concept of codomain.

<div class="spaced1">&nbsp;</div>
Not every process that turns a domain element into a return
value is a function.  Mathematics has one inviolable rule:
when a function is applied twice with the same input it must
produce the same return value.

<div  class="indent smalljz italicjz display">
This rule is not followed in computer programming.
For example a programmer may work with 
a so-called function <span class="code">getLine</span> that returns a line
of text from somewhere.  Each time <span class="code">getLine</span> is applied it
reads and returns a different line.
</div>

Here are two possible functions.  Do both of them satisfy
the requirements to be a function in the mathematical
sense<span class="boldjz code">??</span>

<ol><li>
A function that inputs your cell phone number and returns a
pair containing the longitude and latitude where the phone can be found. 
</li><li>
A function that inputs a picture and two sets of coordinates, representing two diagonally opposed corners of a rectangle in the picture, and outputs a cropping of the picture consisting of that rectangle.

<div  class="center display"><img class="center" height="190px" src="http://www.jazimmer.net/SteppingIntoMath/images/pictureFn.png" alt="image: Cropping a Picture"/></div>

</li></ol>

<div class="spaced1">&nbsp;</div>
<h4>answer:</h4>
<div  class="indent display">
No.  The first example is not a function because the same
phone number will not always return the same
<span class="italicjz">(longitude,latitude)</span> pair.
<div class="ln">&nbsp</div>
The second example is a function.  There is no requirement that a
function's domain or range has to involve numbers and this
function will
return the same picture each time it is applied with the same
picture and coordinates.
</div>


<h2 class="next">Functions as Sets of Pairs</h2>

Although most of the function definitions you see in this
monograph describe a process by which output can be calculated
from input, the
standard theoretical definition of a function ignores process
and simply links each possible input to its unique output.
Short said:
a function is a set of <span class="code">(<span class="italicjz">input,output</span>)</span>
pairs. 

</div><div  class="undefined half_display">
When viewed as a set of pairs it is easy know when two
functions are equal, they are equal when they are the same set
of pairs.  When viewed as a process, two functions are equal
if their processes would generate the same set of ordered
pairs when applied to all possible input.

</div><div  class="undefined half_display">
Seen as a set of pairs, functions are data!
Like other data functions can

<ul><li>
be assigned to helping varibles.
</li><li>
be passed as arguments to parameters.
</li><li>
be returned from other functions.
</li></ul>

</div><div  class="undefined half_display"> Functions are different from other data in that they can
be applied. Application of a function turns input into output.
Functions are special this way, but they are not the only kind
of data with special properties.  That is true of most data.
For example, we find the <span class="code">i</span><sup class="sub_sup_size">th</sup> element of a
sequence but we cannot find the <span class="code">i</span><sup class="sub_sup_size">th</sup> element of a
set.

</div><div  class="undefined half_display"> Of course a function is not just any set of pairs.
A function <span class="code">f</span> must satisfy the property that if
<span class="code">(d,c)∊f</span> and
<span class="code">(d,c')∊f</span>, then <span class="code">c=c'</span>. This is another 
way of saying that 
there cannot be two different return
values <span class="code">c</span> and <span class="code">c'</span> for one input value <span class="code">d</span>.

<div  class="indent smalljz italicjz display">
I can remember when thinking of a function as a set of
<span class="code">(<span class="italicjz">input,output</span>)</span> pairs was not so theoretical.  High
school trigonometry books would have a tables of input/output
values for the <span class="code">sine</span>, <span class="code">cosine</span> and <span class="code">tangent</span>
functions.  If, for example, we wanted a value for
<span class="code">sin(0.5)</span>, we would not use a calculator (they did not
exist) or even a slide
rule.  Instead we 
would look up <span class="code">0.5</span> (or an approximation thereof) in a table
and find the return value of <span class="code">sin(0.5)</span> given there.
</div>

<div class="spaced1">&nbsp;</div>
Can you write definitions for the domain and range of an
arbitrary function <span class="code">f</span> in the
{<span class="code"> … | … </span>} notation without applying <span class="code">f</span><span class="boldjz code">??</span>

<div class="spaced1">&nbsp;</div>
<h4>answer:</h4>
<ol><li>
The domain is {<span class="code"> d | (d,c)∊f </span>}
</li><li>
The range is {<span class="code"> c | (d,c)∊f </span>}
</li></ol>




<h2 class="next">Function Definitions and Contexts</h2>

Have a look at this process definition
of a function 
that returns the average of two numbers.

<div  class="code_block indent display">
average(x,y): 
   (x+y)/2
</div>

the variables <span class="code">x</span> and <span class="code">y</span> are called <span class="italicjz">parameters</span>.
They only have known values during the time it takes to
calculate the return value for a particular application of
<span class="code">average</span>.
This diagram
shows the application process this definition specifies.

<div  class="center display"><img class="center" height="100px" src="http://www.jazimmer.net/SteppingIntoMath/images/average3.png" alt="image: Applying the average function"/></div>


The input values 3 and 9 shown in this application of
<span class="code">average</span> are called <span class="italicjz">arguments</span>.
The diagram shows
how the arguments are assigned to the parameter variables.
We know which argument to assign to which
parameter because the arguments and the parameters
are written down in the same order. 

</div><div  class="undefined half_display">
There is a subtlety here that requires a more detailed diagram.
A function definition creates a new context, the <span class="italicjz">application context</span>, that is different from the
<span class="italicjz">global</span> context in
which the definition is written.  This diagram shows the
situation.

<div  class="center display"><img class="center" height="160px" src="http://www.jazimmer.net/SteppingIntoMath/images/average6.png" alt="image: An application context"/></div>


Variables, such as the parameters <span class="code">x</span> and <span class="code">y</span>, that are
created in the application context are not available in the
global context.

</div><div  class="undefined half_display"> The application context created by a function definition
is <span class="italicjz">open</span>.  That means it has variables waiting for values.
These values 
will only become available when the function is applied.
At that time a copy of the application context is
made in which all variables have values.  We call this copy a <span class="italicjz">closed</span>
application context and it only exists for calculating a
particular return value.

</div><div  class="undefined half_display">
Here is another application of the <span class="code">average</span> function.
This time the arguments are algebraic expressions rather than
numbers.  The expressions are made from two global variables
<span class="code">a</span> and <span class="code">b</span> that have the values 6 and 9 respectively.

<div  class="center display"><img class="center" height="235px" src="http://www.jazimmer.net/SteppingIntoMath/images/average5.png" alt="image: Calculating average(a+b,axb)"/></div>

The box in this diagram shows the closed application context
for the <span class="code">average(15,54)</span> application.  
When the value 34.5 is returned,  this closed application
context disappears.

</div><div  class="undefined half_display">
The global variables in this diagram are 
<span class="code">a</span>, <span class="code">b</span>, and <span class="code">average</span>.
Global names are really
global.  They are available everyplace, including in
application contexts.

<div class="spaced1">&nbsp;</div>
The diagrams we have seen so far are too complicated to be
useful.  Here is an example of the kind of diagram I will use
going forward.


<div  class="center display"><img class="center" height="110px" src="http://www.jazimmer.net/SteppingIntoMath/images/LoadedContext1.png" alt="image:  Closed Application Context for average"/></div>


<h2 class="next">Flexible Function Definitions</h2>

Although a function can only calculate one formula, it can
choose that formula based on the input it receives.
Here is an example.

<div  class="code_block indent display">
abs(x):
  <span class="largejz">|</span> x≥0       <span class="largejz"><span style="font-size:115%;">&rarr;</span></span> x
  <span class="largejz">|</span> otherwise <span class="largejz"><span style="font-size:115%;">&rarr;</span></span> -x
</div>

This function has two very simple formulas: <span class="code">x</span> and
<span class="code">-x</span>. 
The <span>“<span class="code">| x≥0 <span class="largejz"><span style="font-size:115%;">&rarr;</span></span></span>”</span> and 
<span>“<span class="code">| otherwise <span class="largejz"><span style="font-size:115%;">&rarr;</span></span></span>”</span> are called
<span class="italicjz">guards</span>.  They determine which formula is used to evaluate
the return value.  The first guard chooses to evaluate 
<span class="code">x</span> if <span class="code">x≥0</span>.   The second guard chooses to evaluate
<span class="code">-x</span> if the test in the first guard fails.  Guards are
evaluated in top-down order and the first one whose test
succeeds will choose the formula to calculate.

</div><div  class="undefined half_display">
When a function definition that has guards is applied, the closed
application context shows only the formula that has been
chosen.  Here is a diagram showing the closed application
context for <span class="code">abs(-1)</span>.

<div  class="center display"><img class="center" height="110px" src="http://www.jazimmer.net/SteppingIntoMath/images/LoadedContext2.png" alt="image:  Closed application context for abs"/></div>

<div  class="indent smalljz italicjz display">
Note that my notation for choosing a formula is uncommon.
What is seen in math textbooks is more like this.

<div  class="center display"><img class="center" height="120px" src="http://www.jazimmer.net/SteppingIntoMath/images/abs.png" alt="image: Absolute value function"/></div>

</div>

I have chosen <span class="code">abs</span> as a simple example.  It is of course
the absolute value function and mathematics already has
notation for that.  In mathematics the absolute value of
<span class="code">-2</span> is denoted with
<span class="code">|-2|</span> and not with <span class="code">abs(-2)</span>.

</div><div  class="undefined half_display"> Mathematics has lots of standard functions with their own
specialized notation.  What you may not have realized is that
the standard arithmetic functions, such as <span class="code">+</span>, are examples
of this;
<span class="code">+</span> is a function whose domain consists of all
pairs of numbers and whose range consists of all the possible
sums of these number pairs.
Were this function named <span class="code">plus</span>, <span class="code">2+2</span> would look like <span class="code">plus(2,2)</span>.


<div class="spaced1">&nbsp;</div>
Sometimes a <span class="code">cmp</span> function is required that
returns 1 if its single argument is positive, -1 if that
argument is negative, and 0 otherwise.  To define such a function
requires three guards.  Can you write the definition<span class="boldjz code">??</span>


<div class="spaced1">&nbsp;</div>
<h4>answer:</h4>
<div  class="indent display">
Here is one way.
<div  class="code_block indent display">
cmp(x):
  <span class="largejz">|</span> x&gt;0       <span class="largejz"><span style="font-size:115%;">&rarr;</span></span> 1
  <span class="largejz">|</span> x=0       <span class="largejz"><span style="font-size:115%;">&rarr;</span></span> 0
  <span class="largejz">|</span> otherwise <span class="largejz"><span style="font-size:115%;">&rarr;</span></span> -1
</div>
</div>

<h2 class="next">Helping Variables</h2>

Let's look at a
function <span class="code">distances</span> that inputs two
numbers <span class="code">lo</span> and <span class="code">hi</span> (with <span class="code">lo&lt;hi</span>) and outputs a
3-tuple with the following values.

<div  class="code_block indent display">
(25% of way to hi from lo,
 50% of way to hi from lo,
 75% of way to hi from lo)
</div>

Here's the definition.

<div  class="code_block indent display">
distances(lo,hi)=
   ( average(lo, average(lo,hi)),
     average(lo,hi),
     average(average(lo,hi),hi)
   )
</div>

There are five applications of the <span class="code">average</span> function
involved in applying <span class="code">distances</span>.  
Although the next diagram is too complicated for ordinary use,
it makes a good demonstration of all the separate closed
contexts that may be necessary to complete a function
application. 

<div  class="center display"><img class="center" height="400px" src="http://www.jazimmer.net/SteppingIntoMath/images/complex.png" alt="image: None closed contexts for distances(4,12)"/></div>

<div class="spaced1">&nbsp;</div>
Why does this calculation produce the desired result?
First note that
<span class="code">average(x,y)</span> divides the distance between <span class="code">x</span> and
<span class="code">y</span> in half.  That means if

<div  class="code_block indent display">
d50 = average(4,12)
</div>

then <span class="code">d50</span> divides the distance between 4 and 12
in half, getting 8 which is 50% of the way from 4 to 12.  Then
<span class="code">average(4,d50)</span> divides the first half in half, getting 6
which is 50% of the way from 4 to 8, or 25% of the way from 4
to 12.  Similarly <span class="code">average(d50,12)</span> becomes 75% of the way
from 4 to 12.

</div><div  class="undefined half_display">  This explanation suggests that the definition of
<span class="code">distances</span> would be easier to understand with some helping
variables.  

</div><div  class="undefined half_display">
We can introduce helping variables using the keyword
<span class="code">where</span>.  This keyword separates a function's main calculation from the
calculations of values for helping variables.

<div  class="code_block indent display">
distances(lo,hi):
   ( d25, d50, d75 )
  where 
    d50 := average(lo,hi)
    d25 := average(lo,d50)
    d75 := average(d50,hi)
</div>

</div><div  class="undefined half_display">
We can see that this definition is easier to
understand than the first definition.  Here is how we might
show its closed context.

<div  class="center display"><img class="center" height="225px" src="http://www.jazimmer.net/SteppingIntoMath/images/notComplex.png" alt="image:  Closed Context with Helping Variables"/></div>

</div><div  class="undefined half_display">
Like parameters, helping variables are known only in the
application context in which they are defined.  I use <span class="code">:=</span>
to define helping variables rather than <span class="code">=</span> because I am declaring a
value for a new variable, not asserting that two known values 
are equal.   (This is a distinction often glossed over in
mathematics.)

</div><div  class="undefined half_display"> <div  class="indent smalljz italicjz display">
For this monograph I borrowed
guards and helping variables from the Haskell programming
language so that, as in formal mathematical logic, my
definitions would make it clear what contexts variables belong
to and that they refer to only one value in any given context.
<br/><br/>
This single value property (called <span class="italicjz">referential
transparency</span>) is valid in both open and closed application contexts.
The difference between them being that some variables
reference
known unknowns in open contexts.
</div>

<div class="spaced1">&nbsp;</div>
<div  class="indent smalljz italicjz display">
Copyright 2023, by J Adrian Zimmer [http://jazimmer.net]
</div>


</div></body><script>function() { var elts = document.getElementsByClassName('page'); for( let i in elts ) { elts[i].setAttribute('class','topMargin') } }()</script></html>